/* ═══════════════════════════════════════════════════
   PH Nation Builder — style.css
   Clean, modern, mobile-first dark theme
═══════════════════════════════════════════════════ */
:root {
  --bg:       #0d1117;
  --bg2:      #161b22;
  --bg3:      #1c2333;
  --border:   #30363d;
  --cyan:     #58a6ff;
  --green:    #3fb950;
  --amber:    #d29922;
  --red:      #f85149;
  --purple:   #bc8cff;
  --text:     #c9d1d9;
  --text2:    #8b949e;
  --white:    #f0f6fc;
  --edu:      #58a6ff;
  --inf:      #f0883e;
  --tec:      #3fb950;
  --sta:      #bc8cff;
  --r: 8px;
  --shadow: 0 4px 16px rgba(0,0,0,0.4);
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:'Inter',sans-serif;font-size:14px;line-height:1.5;min-height:100vh}
button{cursor:pointer;font-family:inherit}
a{color:var(--cyan)}

/* ─── HEADER ─── */
#header{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px;padding:12px 20px;background:var(--bg2);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:100}
#header-left{display:flex;align-items:center;gap:12px}
#flag{font-size:2rem}
#game-name{font-size:1.1rem;font-weight:800;color:var(--white);letter-spacing:-0.02em}
#game-sub{font-size:0.72rem;color:var(--text2)}
#header-right{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.hstat{background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:5px 12px;text-align:center;min-width:64px}
.hstat-label{font-size:0.58rem;font-weight:700;letter-spacing:0.1em;color:var(--text2);text-transform:uppercase}
.hstat-val{font-size:1rem;font-weight:700;color:var(--white);font-family:'Fira Mono',monospace}
.hstat-val small{font-size:0.65em;color:var(--text2)}
#hstat-status{border-color:var(--green)}
.guide-btn{background:rgba(88,166,255,0.12);border:1px solid rgba(88,166,255,0.4);color:var(--cyan);font-weight:600;font-size:0.82rem;padding:7px 14px;border-radius:var(--r);transition:all .2s}
.guide-btn:hover{background:rgba(88,166,255,0.22)}

/* ─── APP LAYOUT ─── */
#app{display:grid;grid-template-columns:280px 1fr 260px;gap:0;min-height:calc(100vh - 56px)}
#panel-left,#panel-right{padding:14px;overflow-y:auto;border-right:1px solid var(--border)}
#panel-right{border-right:none;border-left:1px solid var(--border)}
#panel-center{padding:14px;overflow-y:auto;background:var(--bg)}

/* ─── CARDS ─── */
.card{background:var(--bg2);border:1px solid var(--border);border-radius:var(--r);padding:14px 16px;margin-bottom:12px}
.card-title{font-size:0.78rem;font-weight:700;letter-spacing:0.08em;color:var(--cyan);text-transform:uppercase;margin-bottom:10px;padding-bottom:8px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:6px}
.card-desc{font-size:0.78rem;color:var(--text2);margin-bottom:10px}

/* ─── INFO BUTTON (ⓘ) ─── */
.info-btn{background:rgba(88,166,255,0.1);border:1px solid rgba(88,166,255,0.3);color:var(--cyan);font-size:0.72rem;padding:1px 7px;border-radius:20px;cursor:pointer;margin-left:auto;transition:all .2s}
.info-btn:hover{background:rgba(88,166,255,0.25)}

/* ─── NATION GRID ─── */
#nation-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.nstat{display:flex;align-items:center;gap:8px;background:var(--bg3);border:1px solid var(--border);border-radius:6px;padding:8px 10px}
.nstat-icon{font-size:1.3rem;flex-shrink:0}
.nstat-label{font-size:0.62rem;color:var(--text2);font-weight:600;text-transform:uppercase;letter-spacing:0.05em}
.nstat-val{font-size:0.95rem;font-weight:700;color:var(--white);font-family:'Fira Mono',monospace}
.nstat-warn{border-color:rgba(248,81,73,0.3)}
.nstat-warn .nstat-val{color:var(--red)}

/* ─── LEVEL BARS ─── */
.lrow{display:grid;grid-template-columns:110px 1fr 34px;align-items:center;gap:8px;margin-bottom:8px}
.lname{font-size:0.76rem;color:var(--text)}
.ltrack{height:7px;background:var(--bg3);border-radius:4px;overflow:hidden}
.lfill{height:100%;border-radius:4px;transition:width .5s ease}
.edu-col{background:var(--edu)}
.inf-col{background:var(--inf)}
.tec-col{background:var(--tec)}
.sta-col{background:var(--sta)}
.lnum{font-family:'Fira Mono',monospace;font-size:0.8rem;font-weight:700;color:var(--white);text-align:right}

/* WIN BAR */
#win-wrap{margin-top:14px;padding-top:12px;border-top:1px solid var(--border)}
#win-label-row{display:flex;justify-content:space-between;font-size:0.76rem;color:var(--text2);margin-bottom:6px}
#win-nums{font-family:'Fira Mono',monospace;font-weight:700;color:var(--amber)}
#win-track{position:relative;height:10px;background:var(--bg3);border-radius:5px;overflow:visible;margin-bottom:4px}
#win-fill{height:100%;border-radius:5px;background:linear-gradient(90deg,var(--edu),var(--tec));transition:width .6s ease}
#win-goal{position:absolute;top:-3px;height:16px;width:2px;background:var(--amber);border-radius:1px;left:85%}
#win-caption{font-size:0.68rem;color:var(--text2);text-align:center}

/* ─── MAP ─── */
#map-card{background:var(--bg2)}
#map-wrap{display:flex;gap:10px;align-items:flex-start}
#ph-map{width:130px;flex-shrink:0;filter:drop-shadow(0 0 8px rgba(88,166,255,0.25))}
.isle{fill:#1a3a5c;stroke:rgba(88,166,255,0.4);stroke-width:1.2;transition:fill .3s}
.active-isle{fill:#1e4d73;stroke:var(--cyan);stroke-width:1.8}
.map-lbl{font-family:'Inter',sans-serif;font-size:8px;fill:rgba(88,166,255,0.5);font-weight:700;letter-spacing:1px}
#map-overlay{flex:1;display:flex;flex-direction:column;gap:6px}
.mo-row{display:flex;justify-content:space-between;align-items:center;background:var(--bg3);border:1px solid var(--border);border-radius:5px;padding:5px 8px;font-size:0.72rem}
.mo-row span:first-child{color:var(--text2)}
.mo-row span:last-child{font-family:'Fira Mono',monospace;font-weight:700;color:var(--white)}

/* ─── TURN BANNER ─── */
#turn-banner{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px;margin-bottom:14px;padding:14px 16px;background:var(--bg2);border:1px solid var(--border);border-radius:var(--r)}
#turn-title{font-size:1rem;font-weight:700;color:var(--white)}
#turn-title span{color:var(--amber)}
#turn-sub{font-size:0.74rem;color:var(--text2);margin-top:2px}
#btn-advance{background:var(--green);color:#0d1117;font-weight:800;font-size:1rem;padding:10px 24px;border:none;border-radius:var(--r);letter-spacing:0.04em;transition:all .2s;box-shadow:0 0 16px rgba(63,185,80,0.3)}
#btn-advance:hover{background:#4ac95a;transform:translateY(-1px);box-shadow:0 0 24px rgba(63,185,80,0.5)}
#btn-advance:active{transform:translateY(0)}

/* ─── BUDGET SLIDERS ─── */
#brb-wrap{height:8px;background:var(--bg3);border-radius:4px;overflow:hidden;margin-bottom:4px}
#brb-fill{height:100%;border-radius:4px;background:var(--green);transition:width .3s,background .3s}
.bsrow{margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid var(--border)}
.bsrow:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}
.bshead{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;font-size:0.82rem;color:var(--text)}
.bsval{font-family:'Fira Mono',monospace;font-weight:700;color:var(--cyan)}
.bsdesc{font-size:0.71rem;color:var(--text2);margin-top:4px}

input[type=range]{-webkit-appearance:none;width:100%;height:4px;background:var(--border);border-radius:2px;outline:none;cursor:pointer;margin:5px 0}
input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;border-radius:50%;background:var(--cyan);cursor:pointer;box-shadow:0 0 6px rgba(88,166,255,0.5);transition:transform .15s}
input[type=range]::-webkit-slider-thumb:hover{transform:scale(1.2)}
#bs-edu::-webkit-slider-thumb{background:var(--edu)}
#bs-inf::-webkit-slider-thumb{background:var(--inf)}
#bs-tec::-webkit-slider-thumb{background:var(--tec)}
#bs-soc::-webkit-slider-thumb{background:var(--sta)}

/* ─── LEVERS ─── */
.lev-row{margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid var(--border)}
.lev-row:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}
.lev-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;font-size:0.82rem;color:var(--text)}
.lev-val{font-size:0.78rem;font-weight:700;color:var(--amber);background:rgba(210,153,34,0.1);border:1px solid rgba(210,153,34,0.3);padding:1px 8px;border-radius:20px}
.lev-scale{display:flex;justify-content:space-between;font-size:0.65rem;color:var(--text2);margin-top:2px}

/* ─── EVENT CARD ─── */
#ev-name{font-size:1rem;font-weight:700;color:var(--amber);margin-bottom:4px}
#ev-effect{font-size:0.78rem;font-weight:600;color:var(--cyan);margin-top:4px}

/* ─── REPORT ─── */
#report-body .rline{font-size:0.79rem;padding:4px 0 4px 8px;border-left:2px solid var(--border);margin-bottom:3px}
#report-body .rline.good{border-color:var(--green);color:var(--green)}
#report-body .rline.bad {border-color:var(--red);color:var(--red)}
#report-body .rline.note{border-color:var(--amber);color:var(--amber)}
#report-body .rline.head{border-color:var(--cyan);color:var(--cyan);font-weight:700}

/* ─── ADVISOR ─── */
#advisor-msg{font-size:0.82rem;color:var(--text);line-height:1.65;background:var(--bg3);border-radius:6px;padding:10px 12px;border-left:3px solid var(--amber)}

/* ─── DANGER METERS ─── */
.danger-row{display:grid;grid-template-columns:90px 1fr 40px 60px;align-items:center;gap:6px;margin-bottom:8px}
.dlabel{font-size:0.71rem;color:var(--text2)}
.dtrack{height:6px;background:var(--bg3);border-radius:3px;overflow:hidden}
.dfill{height:100%;border-radius:3px;transition:width .4s}
.uf{background:var(--amber)}
.df{background:var(--red)}
.nf{background:var(--purple)}
.dnum{font-family:'Fira Mono',monospace;font-size:0.78rem;font-weight:700;color:var(--white);text-align:right}
.dlim{font-size:0.65rem;color:var(--text2)}
#danger-note{font-size:0.7rem;color:var(--text2);text-align:center;margin-top:6px;padding-top:6px;border-top:1px solid var(--border)}

/* ─── LOG ─── */
#log-body{max-height:280px;overflow-y:auto}
.log-entry{display:flex;gap:8px;font-size:0.72rem;color:var(--text2);padding:5px 0;border-bottom:1px solid var(--border)}
.log-yr{font-family:'Fira Mono',monospace;font-weight:700;color:var(--cyan);flex-shrink:0;width:36px}

/* ─── MODALS SHARED ─── */
#end-overlay,#guide-overlay,#info-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.75);display:flex;align-items:center;justify-content:center;z-index:10000;backdrop-filter:blur(4px);padding:16px;overflow-y:auto}
.hidden{display:none!important}

/* END MODAL */
#end-card{background:var(--bg2);border:1px solid var(--border);border-radius:12px;padding:40px 36px;text-align:center;max-width:400px;width:100%;box-shadow:var(--shadow)}
#end-icon{font-size:3.5rem;margin-bottom:12px}
#end-title{font-size:1.8rem;font-weight:800;color:var(--white);margin-bottom:10px}
#end-body{font-size:0.85rem;color:var(--text2);margin-bottom:24px;line-height:1.7}
#end-btn{background:var(--cyan);color:#0d1117;font-weight:800;font-size:1rem;padding:12px 32px;border:none;border-radius:var(--r);cursor:pointer}
#end-btn:hover{background:#79baff}

/* GUIDE MODAL */
#guide-card{background:var(--bg2);border:1px solid var(--border);border-radius:12px;width:100%;max-width:620px;max-height:88vh;overflow-y:auto;box-shadow:var(--shadow)}
#guide-hdr{display:flex;justify-content:space-between;align-items:center;padding:18px 20px 0;margin-bottom:14px}
#guide-title{font-size:1.2rem;font-weight:800;color:var(--white)}
.close-btn{background:var(--bg3);border:1px solid var(--border);color:var(--text2);font-size:0.9rem;padding:4px 10px;border-radius:6px;cursor:pointer;transition:color .2s}
.close-btn:hover{color:var(--red)}
.gtabs{display:flex;flex-wrap:wrap;gap:6px;padding:0 20px 14px;border-bottom:1px solid var(--border)}
.gtab{background:transparent;border:1px solid var(--border);color:var(--text2);font-size:0.78rem;font-weight:600;padding:6px 12px;border-radius:20px;cursor:pointer;transition:all .2s}
.gtab:hover{color:var(--cyan);border-color:var(--cyan)}
.gtab.active{background:var(--cyan);color:#0d1117;border-color:var(--cyan)}
.gtab-content{display:none;padding:18px 20px}
.gtab-content.active{display:block}
.gtab-content h3{font-size:0.9rem;font-weight:700;color:var(--white);margin:14px 0 6px}
.gtab-content h3:first-child{margin-top:0}
.gtab-content p{font-size:0.82rem;color:var(--text);line-height:1.65;margin-bottom:8px}
.steps{display:flex;flex-direction:column;gap:7px;margin:8px 0}
.step{display:flex;gap:10px;align-items:flex-start;font-size:0.82rem;color:var(--text)}
.sn{flex-shrink:0;width:22px;height:22px;border-radius:50%;background:var(--cyan);color:#0d1117;font-weight:800;font-size:0.72rem;display:flex;align-items:center;justify-content:center}
.ftable{border:1px solid var(--border);border-radius:6px;overflow:hidden;margin:8px 0}
.frow{display:grid;grid-template-columns:1fr 1.5fr;gap:10px;padding:7px 12px;font-size:0.79rem;border-bottom:1px solid var(--border)}
.frow:last-child{border-bottom:none}
.frow b{color:var(--white);font-weight:600}
.frow span{color:var(--text2)}
.danger-t .frow b{color:var(--red)}
.tip-box{background:rgba(63,185,80,0.08);border:1px solid rgba(63,185,80,0.25);border-radius:6px;padding:10px 12px;font-size:0.79rem;color:var(--green);margin-top:8px}

/* INFO MODAL */
#info-card{background:var(--bg2);border:1px solid var(--border);border-radius:10px;max-width:480px;width:100%;max-height:80vh;overflow-y:auto;box-shadow:var(--shadow)}
#info-hdr{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-bottom:1px solid var(--border)}
#info-title{font-weight:700;color:var(--white)}
#info-body{padding:14px 16px;font-size:0.82rem;color:var(--text);line-height:1.7}
#info-body b{color:var(--white)}
#info-body p{margin-bottom:8px}

/* Scrollbar */
::-webkit-scrollbar{width:5px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}

/* ─── RESPONSIVE ─── */
@media(max-width:960px){
  #app{grid-template-columns:1fr 1fr;grid-template-rows:auto auto}
  #panel-left{grid-column:1;grid-row:1}
  #panel-center{grid-column:2;grid-row:1}
  #panel-right{grid-column:1/-1;grid-row:2;border-left:none;border-top:1px solid var(--border)}
}
@media(max-width:660px){
  #app{grid-template-columns:1fr}
  #panel-left,#panel-center,#panel-right{grid-column:1;border:none;border-bottom:1px solid var(--border)}
  #header-right{width:100%}
  #nation-grid{grid-template-columns:1fr 1fr}
  #btn-advance{width:100%}
}
